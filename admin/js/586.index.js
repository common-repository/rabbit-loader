"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[586],{15:(e,t,n)=>{n.r(t),n.d(t,{UrlList:()=>z});var a=n(2784),r=n(7029),l=n(8889),o=n(6027),c=n(5992),i=n(6281),s=n(4073),d=n(7104),u=n(8887),m=n(9606),p=n(969),h=n(9312),g=n(1740),f=n(1892),E=n(6582),v=n(1188),b=n(6769);const y=function(e){let{onChange:t,value:n}=e;return a.createElement(g.Z,{sx:{p:3,display:"flex",alignItems:"center",justifyContent:"space-between"}},a.createElement(g.Z,{sx:{display:"flex",alignItems:"center",width:"100%"}},a.createElement("style",null,"\n              .wp-admin div.rl-can-url-search div input  {\n                padding: 16.5px 14px !important;\n                padding-left: 0 !important;\n                border: 0 !important;\n              }\n              .wp-admin div.rl-can-url-search div input:focus  {\n                box-shadow:none !important;\n              }\n          "),a.createElement(E.Z,{sx:{height:1,width:"100%"},className:"rl-can-url-search",placeholder:"Search...",onChange:e=>t(e),value:n,InputProps:{startAdornment:a.createElement(v.Z,{position:"start"},a.createElement(b.Z,{icon:"eva:search-fill"}))}})))};var w=n(7690),x=n(9360),Z=n(2940),C=n(6968);function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},S.apply(this,arguments)}function k(e){let{dense:t,onChangeDense:n,rowsPerPageOptions:r=[5,10,25],sx:l,...o}=e;return a.createElement(g.Z,{sx:{...l}},n&&a.createElement(Z.Z,{label:"Dense",control:a.createElement(x.Z,{checked:t,onChange:n}),sx:{pl:2,py:1.5}}),a.createElement(C.Z,S({rowsPerPageOptions:r,component:"div"},o,{sx:{borderTopColor:"transparent"}})))}var P=n(2681),L=n(9926),R=n(6136),F=n(6286),D=n(3868);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j.apply(this,arguments)}function O(e){let{filters:t,onResetFilter:n,results:r,...l}=e;return a.createElement(D.Z,j({spacing:1.5},l),a.createElement(g.Z,{sx:{typography:"body2",display:"flex",justifyContent:"center"}},a.createElement("strong",{style:{marginRight:"5px"}},r),a.createElement(g.Z,{component:"span",sx:{color:"text.secondary",ml:.25}},"results found")),a.createElement(g.Z,{sx:{display:"flex",alignItems:"center",ml:1,mb:2}},!!t.name&&a.createElement(_,{label:"Keyword:"},a.createElement(L.Z,{label:t.name,size:"small",onDelete:n})),a.createElement(F.Z,{color:"error",onClick:n,startIcon:a.createElement(b.Z,{icon:"solar:trash-bin-trash-bold"}),sx:{}},"Clear")))}function _(e){let{label:t,children:n,sx:r,...l}=e;return a.createElement(D.Z,j({component:R.Z,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...r}},l),a.createElement(g.Z,{component:"span",sx:{typography:"subtitle2"}},t),a.createElement(D.Z,{spacing:1,direction:"row",flexWrap:"wrap"},n))}const I=n.p+"e503aec708eb2a9768c7.svg",T=[{id:"canonical-url",label:"Canonical URL (without protocal)"},{id:"first-detected",label:"First Detected"},{id:"cache-refreshed",label:"Cache Refreshed"}],U=(0,c.ZP)(p.Z)((e=>{let{theme:t}=e;return{"&:nth-of-type(even)":{backgroundColor:t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}));function M(e){var t,n,r,l;let{domain:c,urlClickLocation:E}=e;const[v,b]=a.useState(0),[x,Z]=a.useState(10),[C,S]=a.useState(),[L,R]=a.useState(""),F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[n,r]=(0,a.useState)(e);return(0,a.useEffect)((()=>{const n=setTimeout((()=>{r(e)}),t);return()=>{clearTimeout(n)}}),[e,t]),n}(L,300),[D,j]=a.useState(!1),[_,M]=a.useState(!1),[A,W]=a.useState(""),[z,H]=a.useState("desc");function N(e){let t=new Date(e),n=t.toLocaleString("default",{month:"short"}),a=t.getDate(),r=t.getFullYear(),l=t.getHours(),o=t.getMinutes(),c=l>=12?"PM":"AM";return l%=12,l=l||12,o=o<10?"0"+o:o,n+" "+a+", "+r+", "+l+":"+o+" "+c}return a.useEffect((()=>{!async function(){j(!0);try{const e=await async function(e){let{domain:t,draw:n,start:a,length:r,orderColumn:l,orderDir:o,search:c}=e;const i=new URLSearchParams;i.append("draw",n.toString());const s=(0,w.YT)(!1);i.append("columns[0][data]","url"),i.append("columns[0][name]",""),i.append("columns[0][searchable]","true"),i.append("columns[0][orderable]","false"),i.append("columns[0][search][value]",""),i.append("columns[0][search][regex]","false"),i.append("columns[1][data]","create_time"),i.append("columns[1][name]",""),i.append("columns[1][searchable]","true"),i.append("columns[1][orderable]","true"),i.append("columns[1][search][value]",""),i.append("columns[1][search][regex]","false"),i.append("columns[2][data]","update_time"),i.append("columns[2][name]",""),i.append("columns[2][searchable]","true"),i.append("columns[2][orderable]","true"),i.append("columns[2][search][value]",""),i.append("columns[2][search][regex]","false"),i.append("order[0][column]",l.toString()),i.append("order[0][dir]",o),i.append("start",a.toString()),i.append("length",r.toString()),i.append("search[value]",c),i.append("search[regex]","false"),i.append("domain",t);const d="".concat((0,w.xp)(),"/api/v1/report/canonical_urls?").concat(i.toString()),u=await fetch(d,{headers:{Authorization:"Bearer ".concat(s||"")}});if(200!==u.status)return{error:"Some thing went wrong.",data:null};const m=await u.json();return m&&m.data&&m.data.records&&void 0!==m.data.recordsTotal&&void 0!==m.data.recordsFiltered?{data:{records:m.data.records,recordsTotal:m.data.recordsTotal,recordsFiltered:m.data.recordsFiltered},error:null}:{data:null,error:"Some thing went wrong."}}({domain:c,draw:1,length:x,orderColumn:"cache-refreshed"===A?2:1,orderDir:z,search:L,start:v*x});if(e.error)return;e.data.records.map((e=>{e.create_time=N(e.create_time),e.update_time=N(e.update_time)})),S(e)}catch(e){console.log(e)}finally{j(!1)}}()}),[x,v,F,c,z,A]),a.createElement(g.Z,{sx:{isolation:"auto"}},a.createElement(o.Z,{sx:{width:"100%",py:2}},a.createElement(h.Z,{variant:"h5",sx:{my:3,ml:3,color:"#000000 !important"}},"Canonical URLs Detected"),a.createElement(y,{onChange:e=>R(e.target.value),value:L}),L.length>0&&a.createElement(O,{filters:{name:L},results:(null==C?void 0:C.data.recordsFiltered)||0,onResetFilter:()=>R("")}),a.createElement(u.Z,{sx:{maxHeight:440}},a.createElement(i.Z,{stickyHeader:!0,"aria-label":"sticky table",size:_?"small":"medium"},a.createElement(m.Z,null,a.createElement(p.Z,null,T.map((e=>a.createElement(d.Z,{key:e.id,align:e.align,style:{minWidth:e.minWidth},sortDirection:"desc"},"canonical-url"===e.id?a.createElement(a.Fragment,null,e.label):a.createElement(P.Z,{hideSortIcon:!0,active:A===e.id,direction:z,onClick:()=>{W(e.id),H("asc"===z?"desc":"asc")}},e.label)))))),a.createElement(s.Z,null,D?a.createElement(p.Z,null,a.createElement(d.Z,{colSpan:T.length,height:370,align:"center"},a.createElement(f.a,null))):null!==(t=null==C||null===(n=C.data)||void 0===n||null===(n=n.records)||void 0===n?void 0:n.length)&&void 0!==t&&t?null==C?void 0:C.data.records.map((e=>a.createElement(U,{hover:!0,role:"checkbox",tabIndex:-1,key:e._id},a.createElement(d.Z,{onClick:()=>{E&&(window.location.hash=E.replace("%%URL%%",encodeURIComponent(e.url)))},sx:{fontWeight:500,cursor:"pointer"}},e.url),a.createElement(d.Z,null,e.create_time),a.createElement(d.Z,null,e.update_time)))):a.createElement(p.Z,null,a.createElement(d.Z,{colSpan:T.length,height:300,align:"center"},a.createElement("img",{src:I,alt:"No Data Found",style:{width:160}}),a.createElement(h.Z,{variant:"body1"},"No canonical URL found.",a.createElement("br",null),"For a new site, it may take a few hours depending on the network connectivity and hosting server firewall.")))))),a.createElement(g.Z,{sx:{display:"flex",justifyContent:"end",mt:2,mr:1}},a.createElement("style",null,"\n              span.MuiTablePagination-root div p  {\n                margin-top: 0px;\n                margin-bottom: 0px;\n                color: black;\n              }\n            "),a.createElement(k,{rowsPerPageOptions:[10,25,100],count:0===(null==C?void 0:C.data.recordsFiltered)?null==C?void 0:C.data.recordsTotal:null!==(r=null==C||null===(l=C.data)||void 0===l?void 0:l.recordsFiltered)&&void 0!==r?r:0,sx:{all:"unset",display:"flex",width:"100%",justifyContent:"space-between"},component:"span",rowsPerPage:x,dense:_,onChangeDense:e=>M(e.target.checked),page:v,onPageChange:(e,t)=>{b(t)},onRowsPerPageChange:e=>Z(+e.target.value)}))))}var A=n(8120);function W(e){let{domain:t,urlClickLocation:n}=e;return a.createElement(a.Fragment,null,a.createElement(A.mu,{defaultSettings:{themeMode:"light",themeDirection:"ltr",themeContrast:"default",themeLayout:"vertical",themeColorPresets:"blue",themeStretch:!1}},a.createElement(l.Z,null,a.createElement(M,{domain:t,urlClickLocation:n}))))}function z(e){let{id:t,domain:n,urlClickLocation:l}=e;if("local-testing-root"!==t)return a.createElement(W,{domain:n,urlClickLocation:l});r.createRoot(document.getElementById(t)).render(a.createElement(a.StrictMode,null,a.createElement(W,{domain:n,urlClickLocation:l})))}}}]);