"use strict";(this.webpackChunkRLAdmin=this.webpackChunkRLAdmin||[]).push([[266],{7266:(e,t,n)=>{n.r(t),n.d(t,{ActivityHistory:()=>j});var r=n(2784),l=n(7029),a=n(8889),o=n(8120),i=n(1350),c=n(8718),s=n(8745),m=n(9312),u=n(5154),d=n(6027),h=n(2821),f=n(3655),g=n(3182),E=n(1876),p=n(8983),y=n(1892),Z=n(7287),v=n(6382),w=n(5861);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b.apply(this,arguments)}function D(e){let{title:t,subheader:n,loading:l,list:a,...o}=e;return r.createElement(d.Z,o,r.createElement(u.Z,{title:t,subheader:n}),l?r.createElement(y.a,{sx:{p:3}}):r.createElement(c.Z,{sx:{m:0,p:3,["& .".concat(E.Z.root,":before")]:{flex:0,padding:0}}},a?a.map(((e,t)=>r.createElement(S,{key:e.id,item:e,lastTimeline:t===a.length-1}))):r.createElement(m.Z,null,"No data found")))}var I=new v.Z;function S(e){let{item:t,lastTimeline:n}=e;const{type:l,title:a,time:o}=t;var i,c;return i=a.includes("<")?I.turndown("<h6>".concat(a,"</h6>")):"###### "+a,r.createElement(p.Z,null,r.createElement(f.Z,null,r.createElement(s.Z,{color:("order1"===l?"primary":"order2"===l&&"success")||"I"===l&&"info"||"W"===l&&"warning"||"error"}),n?null:r.createElement(g.Z,null)),r.createElement(h.Z,null,r.createElement(m.Z,{variant:"subtitle2"},r.createElement(w.U,{components:{a(e){const{node:t,...n}=e;return r.createElement("a",b({target:"_blank"},n))}}},i)),r.createElement(m.Z,{variant:"caption",sx:{color:"text.disabled"}},(c=o)?(0,Z.Z)(new Date(c),"dd MMM yyyy p"):"")))}var k=n(3454);function x(e){let{domainID:t}=e;const[n,l]=r.useState(!1),[a,o]=r.useState();return r.useEffect((()=>{!async function(){l(!0);try{const e=await async function(e){let{domainID:t}=e;const n="".concat((0,k.ZQ)(),"/activitylog/domain/").concat(t),r=(0,k.YT)(!1),l=await fetch(n,{headers:{Authorization:"Bearer ".concat(r||"")}});if(200!==l.status)return{error:"Some thing went wrong.",logs:null};const a=await l.json();if(!a||!a.logs)return{logs:null,error:"Some thing went wrong."};const o=[];return a.logs.map((e=>{o.push({id:"",title:e.desc,time:new Date(e.time),type:e.level})})),{logs:o,error:null}}({domainID:t});if(e.error)return;o(e)}catch(e){console.error(e),o({error:"failed to get notifications",logs:null})}finally{l(!1)}}()}),[t]),r.createElement(i.Z,{xs:12,md:6,lg:4},r.createElement(D,{title:"Recent Notifications",subheader:null==a?void 0:a.error,loading:n,list:null==a?void 0:a.logs}))}function M(e){let{domainID:t}=e;return r.createElement(r.Fragment,null,r.createElement(o.mu,{defaultSettings:{themeMode:"light",themeDirection:"ltr",themeContrast:"default",themeLayout:"vertical",themeColorPresets:"blue",themeStretch:!1}},r.createElement(a.Z,null,r.createElement(x,{domainID:t}))))}function j(e){let{domID:t,domainID:n}=e;if("local-testing-root"!==t)return r.createElement(M,{domainID:n});l.createRoot(document.getElementById(t)).render(r.createElement(r.StrictMode,null,r.createElement(M,{domainID:n})))}}}]);